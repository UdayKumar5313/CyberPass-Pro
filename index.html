<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker Style Password Generator</title>
    <style>
        :root {
            --primary: #00ff00;
            --secondary: #00cc00;
            --tertiary: #009900;
            --dark: #000000;
            --light: #ffffff;
            --gray: #333333;
            --very-weak: #ff0000;
            --weak: #ff6600;
            --moderate: #ffcc00;
            --strong: #66ff66;
            --very-strong: #00ff00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: var(--dark);
            color: var(--primary);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        /* Hacker background animation */
        .hacker-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.1;
            pointer-events: none;
        }

        .hacker-line {
            position: absolute;
            white-space: pre;
            font-size: 1.5rem;
            opacity: 0.1;
        }

        /* Terminal-style container */
        .container {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 2rem;
            width: 100%;
            max-width: 600px;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 0 20px var(--primary);
        }

        h1 {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary);
            letter-spacing: 2px;
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Password display */
        .password-display {
            background: transparent;
            border: 1px solid var(--primary);
            border-radius: 4px;
            padding: 1rem;
            font-size: 1.2rem;
            color: var(--primary);
            position: relative;
            margin-bottom: 1.5rem;
            transition: all 0.3s;
        }

        .password-display:hover {
            border-color: var(--secondary);
            box-shadow: 0 0 10px var(--secondary);
        }

        .password-display input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: bold;
            outline: none;
            cursor: pointer;
        }

        .password-display .controls {
            position: absolute;
            right: 1rem;
            top: 1rem;
            display: flex;
            gap: 0.5rem;
        }

        .password-display .controls button {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 0.4rem 0.6rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .password-display .controls button:hover {
            background: var(--primary);
            color: var(--dark);
        }

        /* Generate button */
        .generate-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: var(--dark);
            border: none;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 10px var(--secondary);
        }

        .generate-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, var(--secondary) 10%, transparent 10.01%);
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            pointer-events: none;
        }

        .generate-btn.animate::before {
            animation: ripple 0.6s ease-out forwards;
        }

        @keyframes ripple {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0.7;
            }
            100% {
                transform: translate(-50%, -50%) scale(10);
                opacity: 0;
            }
        }

        /* Strength meter */
        .strength-meter {
            height: 10px;
            background: var(--gray);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .strength-meter-fill {
            height: 100%;
            width: 0%;
            background: var(--primary);
            transition: all 0.5s ease-out;
        }

        /* Feedback section */
        .feedback {
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .feedback li {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .feedback li span.feedback-icon {
            margin-right: 0.5rem;
            color: var(--moderate);
        }

        .requirements {
            margin-top: 1.5rem;
        }

        .requirements li {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .requirements li span.requirement-icon {
            margin-right: 0.5rem;
        }

        .met span.requirement-icon {
            color: var(--very-strong);
        }

        .unmet span.requirement-icon {
            color: var(--very-weak);
        }

        .slider-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .option-row {
            display: flex;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .mode-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            cursor: pointer;
        }

        .dark-mode .mode-toggle {
            color: var(--primary);
        }

        .light-mode {
            background-color: var(--light);
            color: var(--dark);
        }

        .light-mode .password-display input {
            color: var(--dark);
        }

        .light-mode .password-display {
            border-color: var(--dark);
        }

        .light-mode .password-display .controls button {
            color: var(--dark);
            border-color: var(--dark);
        }

        .light-mode .password-display .controls button:hover {
            background-color: var(--dark);
            color: var(--light);
            border-color: var(--dark);
        }

        .light-mode .strength-meter {
            background-color: #ddd;
        }

        .light-mode .requirement-icon.fas.fa-check {
            color: var(--success);
        }

        .light-mode .requirement-icon.fas.fa-times {
            color: var(--danger);
        }

        .light-mode .security-persona {
            color: var(--dark);
        }

        .light-mode .crack-time {
            color: var(--dark);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes confetti-fall {
            from {
                transform: translateY(0) rotate(0);
            }
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
        }

        .visual-hash {
            width: 100px;
            height: 100px;
            margin: 1rem auto;
            display: block;
            border: 1px solid var(--primary);
            border-radius: 4px;
        }

        .security-persona {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .feature-cards {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .feature-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary);
            border-radius: 4px;
            padding: 1rem;
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary);
            box-shadow: 0 0 10px var(--secondary);
        }

        .footer {
            margin-top: 2rem;
            font-size: 0.8rem;
            text-align: center;
        }

        .history-section {
            margin-top: 1.5rem;
        }

        .history-item {
            cursor: pointer;
            padding: 0.3rem 0;
            transition: color 0.3s;
        }

        .history-item:hover {
            color: var(--secondary);
        }

        .crack-time {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-style: italic;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Hacker background -->
    <div class="hacker-background" id="hackerBackground"></div>

    <div class="container">
        <div class="mode-toggle" id="modeToggle">üåû</div>

        <h1>Password Generator</h1>

        <!-- Password display -->
        <div class="password-display" id="passwordDisplay">
            <input type="text" id="passwordInput" readonly>
            <div class="controls">
                <button id="copyBtn">üìã</button>
            </div>
        </div>

        <!-- Canvas for visual hash -->
        <canvas class="visual-hash" id="visualHash" width="100" height="100"></canvas>

        <!-- Security persona -->
        <div class="security-persona" id="securityPersona">
            <span>üõ°Ô∏è Fort Knox Defender</span>
        </div>

        <!-- Generate button -->
        <button class="generate-btn" id="generateBtn">GENERATE PASSWORD</button>

        <!-- Passphrase button -->
        <div style="margin-top: 1rem; text-align: center;">
            <button id="passphraseBtn" style="background: var(--tertiary); color: black; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; transition: all 0.3s;">
                Generate Passphrase
            </button>
        </div>

        <!-- Password options -->
        <div class="options-section">
            <label class="slider-container">
                Password Length: 
                <span id="lengthValue">12</span>
                <input type="range" id="lengthSlider" min="4" max="64" value="12">
            </label>

            <div class="slider-container">
                <label class="option-row">
                    <input type="checkbox" id="uppercaseCheck" checked>
                    <span style="margin-left: 0.5rem;">Include Uppercase Letters (A-Z)</span>
                </label>
                
                <label class="option-row">
                    <input type="checkbox" id="lowercaseCheck" checked>
                    <span style="margin-left: 0.5rem;">Include Lowercase Letters (a-z)</span>
                </label>
                
                <label class="option-row">
                    <input type="checkbox" id="numbersCheck" checked>
                    <span style="margin-left: 0.5rem;">Include Numbers (0-9)</span>
                </label>
                
                <label class="option-row">
                    <input type="checkbox" id="symbolsCheck" checked>
                    <span style="margin-left: 0.5rem;">Include Symbols (!@#$%^&*)</span>
                </label>
                
                <label class="option-row">
                    <input type="checkbox" id="excludeAmbiguousCheck" checked>
                    <span style="margin-left: 0.5rem;">Exclude Ambiguous Characters (lI1O0)</span>
                </label>
            </div>
        </div>

        <!-- Password requirements -->
        <div class="requirements" id="requirements">
            <h3>Password Requirements:</h3>
            <ul>
                <li class="unmet" id="req-length">
                    <span class="requirement-icon fas fa-times unmet"></span>Minimum 8 characters
                </li>
                <li class="unmet" id="req-uppercase">
                    <span class="requirement-icon fas fa-times unmet"></span>At least one uppercase letter
                </li>
                <li class="unmet" id="req-lowercase">
                    <span class="requirement-icon fas fa-times unmet"></span>At least one lowercase letter
                </li>
                <li class="unmet" id="req-number">
                    <span class="requirement-icon fas fa-times unmet"></span>At least one number
                </li>
                <li class="unmet" id="req-symbol">
                    <span class="requirement-icon fas fa-times unmet"></span>At least one special character
                </li>
                <li class="unmet" id="req-ambiguous">
                    <span class="requirement-icon fas fa-times unmet"></span>No ambiguous characters (lI1O0)
                </li>
            </ul>
        </div>

        <!-- Recent passwords -->
        <div class="history-section">
            <h3 style="margin-bottom: 0.5rem;">Recent Passwords:</h3>
            <div id="historyList" style="font-size: 0.9rem;"></div>
        </div>

        <!-- Feedback and crack time -->
        <ul class="feedback" id="feedback"></ul>
        <div class="crack-time" id="crackTime">Estimated crack time: N/A</div>

        <!-- Feature cards -->
        <div class="feature-cards">
            <div class="feature-card">
                <h3>Security Personas</h3>
                <p>Get personalized guidance based on strength</p>
            </div>
            <div class="feature-card">
                <h3>Memory Triggers</h3>
                <p>Create visual anchors for better retention</p>
            </div>
            <div class="feature-card">
                <h3>Compliance Helper</h3>
                <p>Meet regulatory standards (GDPR, HIPAA, PCI DSS)</p>
            </div>
            <div class="feature-card">
                <h3>Password Aging</h3>
                <p>Track password decay over time</p>
            </div>
        </div>

        <!-- Last generated info -->
        <div class="footer" id="lastGenerated">Last generated: N/A</div>
    </div>

    <script>
        // DOM Elements
        const passwordInput = document.getElementById('passwordInput');
        const copyBtn = document.getElementById('copyBtn');
        const generateBtn = document.getElementById('generateBtn');
        const passphraseBtn = document.getElementById('passphraseBtn');
        const lengthSlider = document.getElementById('lengthSlider');
        const lengthValue = document.getElementById('lengthValue');
        const visualHash = document.getElementById('visualHash');
        const hackerBackground = document.getElementById('hackerBackground');
        const modeToggle = document.getElementById('modeToggle');
        const lastGenerated = document.getElementById('lastGenerated');

        // State variables
        let passwordHistory = [];
        let currentLength = parseInt(lengthSlider.value);
        let isDarkMode = true;

        // Character sets
        const uppercaseChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const lowercaseChars = "abcdefghijklmnopqrstuvwxyz";
        const numberChars = "0123456789";
        const symbolChars = "!@#$%^&*()-_=+[]{}|;:,.<>?/";
        const ambiguousChars = "lI1O0";

        // Security personas
        const personas = {
            'Glass House Dweller': 'üè†',
            'Vault Guardian': 'üîí',
            'Fort Knox Defender': 'üõ°Ô∏è'
        };

        // Initialize app
        function init() {
            // Set up hacker background
            createHackerBackground();
            
            // Set up event listeners
            lengthSlider.addEventListener('input', (e) => {
                currentLength = parseInt(e.target.value);
                lengthValue.textContent = currentLength;
                
                if (passwordInput.value && !passwordInput.value.includes('Select')) {
                    generatePassword();
                }
            });

            copyBtn.addEventListener('click', () => {
                if (passwordInput.value && passwordInput.value !== 'Select at least one character type') {
                    navigator.clipboard.writeText(passwordInput.value)
                        .then(() => {
                            copyBtn.textContent = '‚úÖ';
                            setTimeout(() => copyBtn.textContent = 'üìã', 2000);
                        });
                }
            });

            generateBtn.addEventListener('click', () => {
                generatePassword();
                triggerConfetti();
            });

            passphraseBtn.addEventListener('click', () => {
                generatePassphrase();
                triggerConfetti();
            });

            document.querySelectorAll('.option-row input[type="checkbox"]').forEach(input => {
                input.addEventListener('change', () => {
                    if (!document.getElementById('uppercaseCheck').checked &&
                        !document.getElementById('lowercaseCheck').checked &&
                        !document.getElementById('numbersCheck').checked &&
                        !document.getElementById('symbolsCheck').checked) {
                        alert('Please select at least one character type');
                    } else {
                        generatePassword();
                    }
                });
            });

            modeToggle.addEventListener('click', () => {
                document.body.classList.toggle('light-mode');
                document.body.classList.toggle('dark-mode');
                modeToggle.textContent = document.body.classList.contains('light-mode') ? 'üåô' : 'üåû';
            });

            // Initial generation
            generatePassword();
        }

        // Create animated hacker background
        function createHackerBackground() {
            const lines = 20;
            const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            for (let i = 0; i < lines; i++) {
                const line = document.createElement('div');
                line.className = 'hacker-line';
                line.style.top = `${i * 20}px`;
                line.style.left = `${Math.random() * 100}%`;
                line.style.transform = 'translateX(-50%)';
                line.textContent = Array.from({length: 80}, () => 
                    chars[Math.floor(Math.random() * chars.length)]
                ).join('');
                hackerBackground.appendChild(line);
            }
            
            // Update lines every 150ms
            setInterval(() => {
                const existingLines = document.querySelectorAll('.hacker-line');
                existingLines.forEach((line, index) => {
                    line.style.left = `${Math.random() * 100}%`;
                    line.textContent = Array.from({length: 80}, () => 
                        chars[Math.floor(Math.random() * chars.length)]
                    ).join('');
                });
            }, 150);
        }

        // Get character pool based on user selections
        function getCharacterPool() {
            let pool = '';
            if (document.getElementById('uppercaseCheck').checked) pool += uppercaseChars;
            if (document.getElementById('lowercaseCheck').checked) pool += lowercaseChars;
            if (document.getElementById('numbersCheck').checked) pool += numberChars;
            if (document.getElementById('symbolsCheck').checked) pool += symbolChars;
            
            if (document.getElementById('excludeAmbiguousCheck').checked) {
                pool = [...new Set(pool.split('').filter(c => !ambiguousChars.includes(c)).join(''));
            }
            
            return pool;
        }

        // Generate random password
        function generatePassword() {
            const pool = getCharacterPool();
            if (pool.length === 0) {
                passwordInput.value = 'Select at least one character type';
                return;
            }
            
            let newPassword = '';
            
            // Ensure at least one of each selected category
            if (document.getElementById('uppercaseCheck').checked) newPassword += getRandomChar(uppercaseChars);
            if (document.getElementById('lowercaseCheck').checked) newPassword += getRandomChar(lowercaseChars);
            if (document.getElementById('numbersCheck').checked) newPassword += getRandomChar(numberChars);
            if (document.getElementById('symbolsCheck').checked) newPassword += getRandomChar(symbolChars);

            // Fill the rest of the password
            while (newPassword.length < currentLength) {
                newPassword += getRandomChar(pool);
            }
            
            // Shuffle for better randomness
            newPassword = shuffleString(newPassword);
            
            passwordInput.value = newPassword;
            addHistory(newPassword);
            checkPasswordStrength(newPassword);
            updateVisualHash(newPassword);
        }

        // Generate XKCD-style passphrase
        function generatePassphrase() {
            const wordList = ["correct", "horse", "battery", "staple", "dragon", "cloud",
                             "sunny", "moonlight", "robot", "nebula", "galaxy", "shield"];
            const separator = "-";
            const capitalize = true;
            const wordCount = 4;
            
            const parts = [];
            for (let i = 0; i < wordCount; i++) {
                let word = wordList[Math.floor(Math.random() * wordList.length)];
                if (capitalize) {
                    word = word.charAt(0).toUpperCase() + word.slice(1);
                }
                parts.push(word);
            }
            
            const phrase = parts.join(separator);
            passwordInput.value = phrase;
            addHistory(phrase);
            checkPasswordStrength(phrase);
            updateVisualHash(phrase);
        }

        // Add password to history
        function addHistory(pwd) {
            if (pwd && !pwd.startsWith('Select')) {
                passwordHistory.unshift(pwd);
                passwordHistory = [...new Set(passwordHistory)].slice(0, 5);
                
                const historyList = document.getElementById('historyList');
                if (historyList) {
                    historyList.innerHTML = '';
                    passwordHistory.forEach((item, index) => {
                        const div = document.createElement('div');
                        div.className = 'history-item';
                        div.textContent = item;
                        div.addEventListener('click', () => {
                            passwordInput.value = item;
                            checkPasswordStrength(item);
                            updateVisualHash(item);
                        });
                        historyList.appendChild(div);
                    });
                }
            }
        }

        // Check password strength using zxcvbn algorithm
        function checkPasswordStrength(pwd) {
            if (pwd.length === 0) {
                resetUI();
                return;
            }
            
            // Basic checks
            const hasUppercase = /[A-Z]/.test(pwd);
            const hasLowercase = /[a-z]/.test(pwd);
            const hasNumber = /\d/.test(pwd);
            const hasSymbol = /[!@#$%^&*(),.?":{}|<>]/.test(pwd);
            
            // Calculate score based on character variety and length
            let score = 0;
            if (hasUppercase) score++;
            if (hasLowercase) score++;
            if (hasNumber) score++;
            if (hasSymbol) score++;
            
            score += Math.floor(pwd.length / 4);
            
            // Generate feedback
            const feedback = [];
            if (!hasUppercase) feedback.push("Add uppercase letters");
            if (!hasLowercase) feedback.push("Add lowercase letters");
            if (!hasNumber) feedback.push("Add numbers");
            if (!hasSymbol) feedback.push("Add special characters");
            if (pwd.length < 12) feedback.push("Use at least 12 characters");
            
            // Calculate crack time estimate
            const times = [
                "< 1 second",
                "Seconds to minutes",
                "Minutes to hours",
                "Hours to days",
                "Days to weeks",
                "Weeks to months",
                "Months to years",
                "Years to decades",
                "Decades to centuries",
                "Centuries"
            ];
            
            const baseIndex = Math.min(9, score + Math.floor((pwd.length - 8) / 2));
            const crackTime = times[baseIndex];
            
            // Update UI
            updateRequirements(pwd, hasUppercase, hasLowercase, hasNumber, hasSymbol);
            updateStrengthMeter(score);
            updateFeedback(feedback);
            updateCrackTime(crackTime);
            updatePersona(score);
            updateTimeInfo();
        }

        // Update requirement checks
        function updateRequirements(pwd, hasUppercase, hasLowercase, hasNumber, hasSymbol) {
            const reqs = {
                length: pwd.length >= 8,
                uppercase: hasUppercase,
                lowercase: hasLowercase,
                number: hasNumber,
                symbol: hasSymbol,
                notAmbiguous: !/[lI1O0]/.test(pwd)
            };
            
            // Update requirement icons
            const reqElements = [
                { id: 'req-length', met: reqs.length },
                { id: 'req-uppercase', met: reqs.uppercase },
                { id: 'req-lowercase', met: reqs.lowercase },
                { id: 'req-number', met: reqs.number },
                { id: 'req-symbol', met: reqs.symbol },
                { id: 'req-ambiguous', met: reqs.notAmbiguous }
            ];
            
            reqElements.forEach(req => {
                const el = document.getElementById(req.id);
                if (el) {
                    const icon = el.querySelector('.requirement-icon');
                    if (icon) {
                        icon.className = `requirement-icon ${req.met ? 'fas fa-check met' : 'fas fa-times unmet'}`;
                    }
                }
            });
        }

        // Update strength meter
        function updateStrengthMeter(score) {
            const strengthLabel = document.querySelector('.strength-label');
            const strengthMeter = document.querySelector('.strength-meter-fill');
            
            // Calculate percentage
            const strengthPercentage = ((score + 1) / 10) * 100;
            
            // Update strength meter
            strengthMeter.style.width = `${strengthPercentage}%`;
            
            // Set color based on strength
            if (score <= 1) {
                strengthMeter.style.backgroundColor = 'var(--very-weak)';
            } else if (score === 2) {
                strengthMeter.style.backgroundColor = 'var(--weak)';
            } else if (score === 3) {
                strengthMeter.style.backgroundColor = 'var(--moderate)';
            } else if (score <= 5) {
                strengthMeter.style.backgroundColor = 'var(--very-strong)';
            } else {
                strengthMeter.style.backgroundColor = 'var(--primary)';
            }
        }

        // Update feedback messages
        function updateFeedback(feedback) {
            const feedbackList = document.getElementById('feedback');
            if (!feedbackList) return;
            
            feedbackList.innerHTML = '';
            if (feedback.length > 0) {
                feedback.forEach(item => {
                    const li = document.createElement('li');
                    li.innerHTML = `<span class="feedback-icon fas fa-exclamation-circle"></span>${item}`;
                    feedbackList.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.innerHTML = '<span class="feedback-icon fas fa-check-circle"></span>Great job! Your password is strong.';
                feedbackList.appendChild(li);
            }
        }

        // Update crack time display
        function updateCrackTime(time) {
            const crackTimeDiv = document.getElementById('crackTime');
            if (crackTimeDiv) {
                crackTimeDiv.textContent = `Estimated time to crack: ${time}`;
            }
        }

        // Reset UI elements
        function resetUI() {
            const strengthMeter = document.querySelector('.strength-meter-fill');
            if (strengthMeter) {
                strengthMeter.style.width = '0%';
                strengthMeter.style.backgroundColor = 'var(--primary)';
            }
            
            const feedbackList = document.getElementById('feedback');
            if (feedbackList) feedbackList.innerHTML = '';
            
            const crackTimeDiv = document.getElementById('crackTime');
            if (crackTimeDiv) crackTimeDiv.textContent = 'Estimated crack time: N/A';
            
            // Reset requirement icons
            const requirements = ['req-length', 'req-uppercase', 'req-lowercase', 'req-number', 'req-symbol', 'req-ambiguous'];
            requirements.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    const icon = el.querySelector('.requirement-icon');
                    if (icon) {
                        icon.className = 'requirement-icon fas fa-times unmet';
                    }
                }
            });
        }

        // Update security persona
        function updatePersona(score) {
            const personaDiv = document.getElementById('securityPersona');
            if (!personaDiv) return;
            
            if (score <= 1) {
                personaDiv.innerHTML = `<span>üè† Glass House Dweller</span>`;
            } else if (score <= 3) {
                personaDiv.innerHTML = `<span>üîí Vault Guardian</span>`;
            } else {
                personaDiv.innerHTML = `<span>üõ°Ô∏è Fort Knox Defender</span>`;
            }
        }

        // Update time info
        function updateTimeInfo() {
            const now = new Date();
            const age = getPasswordAge();
            const lastGeneratedDiv = document.getElementById('lastGenerated');
            if (lastGeneratedDiv) {
                lastGeneratedDiv.textContent = `Last generated: ${now.toLocaleTimeString()} ‚Ä¢ Age: ${age}`;
            }
        }

        // Get password age
        function getPasswordAge() {
            const ageInMinutes = Math.floor(Math.random() * 100);
            if (ageInMinutes < 15) return 'Fresh';
            if (ageInMinutes < 60) return 'Recent';
            if (ageInMinutes < 240) return 'Moderate Age';
            return 'Needs Update';
        }

        // Trigger confetti animation
        function triggerConfetti() {
            const strengthMeter = document.querySelector('.strength-meter-fill');
            if (!strengthMeter || !strengthMeter.style.width) return;
            
            const strengthWidth = parseFloat(strengthMeter.style.width);
            if (strengthWidth > 70) {
                const colors = ['#FFD700', '#00BFFF', '#FF69B4', '#00FF00', '#FFA500'];
                const duration = 3000;
                const end = Date.now() + duration;
                
                (function frame() {
                    const now = Date.now();
                    if (now < end) {
                        requestAnimationFrame(frame);
                    }
                    
                    const count = 5;
                    for (let i = 0; i < count; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = `${Math.random() * 100}%`;
                        confetti.style.top = `${Math.random() * 100}%`;
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                        document.body.appendChild(confetti);
                        
                        const size = Math.random() * 6 + 4;
                        confetti.style.width = `${size}px`;
                        confetti.style.height = `${size}px`;
                        
                        const animation = confetti.animate(
                            {
                                transform: ['translateY(0) rotate(0)', 'translateY(100vh) rotate(360deg)'],
                                opacity: [1, 0]
                            },
                            {
                                duration: 3000,
                                easing: 'linear'
                            }
                        );
                        
                        animation.onfinish = () => confetti.remove();
                    }
                })();
            }
        }

        // Update visual hash representation
        function updateVisualHash(pwd = passwordInput.value) {
            const canvas = document.getElementById('visualHash');
            const ctx = canvas.getContext('2d');
            const size = 100;
            canvas.width = size;
            canvas.height = size;
            
            // Create hash from password
            const hash = pwd.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
            
            // Create unique pattern based on password
            const hue = hash % 360;
            const saturation = 70 + (hash % 20);
            const lightness = 50 + (hash % 10);
            
            // Clear canvas
            ctx.clearRect(0, 0, size, size);
            
            // Draw background
            ctx.fillStyle = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
            ctx.fillRect(0, 0, size, size);
            
            // Add texture
            ctx.fillStyle = 'rgba(255, 250, 250, 0.1)';
            for (let i = 0; i < 10; i++) {
                ctx.beginPath();
                ctx.arc(
                    Math.sin(i * 0.5) * size * 0.3 + size * 0.5,
                    Math.cos(i * 0.7) * size * 0.3 + size * 0.5,
                    5 + Math.random() * 10,
                    0,
                    Math.PI * 2
                );
                ctx.fill();
            }
        }

        // Real-time password strength check
        passwordInput.addEventListener('input', function() {
            const password = this.value;
            if (password) {
                checkPasswordStrength(password);
                updateVisualHash(password);
                passwordInput.classList.add('pulse');
                setTimeout(() => passwordInput.classList.remove('pulse'), 1000);
            }
        });

        // Get random character from string
        function getRandomChar(chars) {
            return chars[Math.floor(Math.random() * chars.length)];
        }

        // Shuffle string
        function shuffleString(string) {
            const array = string.split('');
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array.join('');
        }

        // Create password with good distribution
        function createPassword() {
            let password = '';
            
            if (document.getElementById('uppercaseCheck').checked) password += getRandomChar(uppercaseChars);
            if (document.getElementById('lowercaseCheck').checked) password += getRandomChar(lowercaseChars);
            if (document.getElementById('numbersCheck').checked) password += getRandomChar(numberChars);
            if (document.getElementById('symbolsCheck').checked) password += getRandomChar(symbolChars);
            
            return password;
        }

        // Update requirement checks
        function updateRequirementChecks(pwd) {
            const hasUppercase = /[A-Z]/.test(pwd);
            const hasLowercase = /[a-z]/.test(pwd);
            const hasNumber = /\d/.test(pwd);
            const hasSymbol = /[!@#$%^&*(),.?":{}|<>]/.test(pwd);
            const meetsLength = pwd.length >= 8;
            const notAmbiguous = !/[lI1O0]/.test(pwd);
            
            // Update requirement icons
            const reqElements = [
                { id: 'req-length', met: meetsLength },
                { id: 'req-uppercase', met: hasUppercase },
                { id: 'req-lowercase', met: hasLowercase },
                { id: 'req-number', met: hasNumber },
                { id: 'req-symbol', met: hasSymbol },
                { id: 'req-ambiguous', met: notAmbiguous }
            ];
            
            reqElements.forEach(req => {
                const el = document.getElementById(req.id);
                if (el) {
                    const icon = el.querySelector('.requirement-icon');
                    if (icon) {
                        if (req.met) {
                            icon.className = 'requirement-icon fas fa-check met';
                        } else {
                            icon.className = 'requirement-icon fas fa-times unmet';
                        }
                    }
                }
            });
        }

        // Update strength meter fill
        function updateStrengthMeterFill(score) {
            const strengthMeter = document.querySelector('.strength-meter-fill');
            if (!strengthMeter) return;
            
            const strengthPercentage = ((score + 1) / 5) * 100;
            strengthMeter.style.width = `${strengthPercentage}%`;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Copy to clipboard
            document.getElementById('copyBtn').addEventListener('click', () => {
                if (passwordInput.value && !passwordInput.value.includes('Select')) {
                    navigator.clipboard.writeText(passwordInput.value)
                        .then(() => {
                            copyBtn.textContent = '‚úÖ';
                            setTimeout(() => copyBtn.textContent = 'üìã', 2000);
                        });
                }
            });

            // Toggle password visibility
            const toggleButton = document.createElement('i');
            toggleButton.className = 'toggle-password fas fa-eye';
            document.querySelector('.password-display').appendChild(toggleButton);

            toggleButton.addEventListener('click', () => {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                toggleButton.classList.toggle('fa-eye');
                toggleButton.classList.toggle('fa-eye-slash');
            });

            // Apply pulsing effect to generate button
            document.getElementById('generateBtn').addEventListener('click', () => {
                document.getElementById('generateBtn').classList.add('animate-pulse');
                setTimeout(() => document.getElementById('generateBtn').classList.remove('animate-pulse'), 1000);
            });
        }

        // Call init when page loads
        window.addEventListener('load', () => {
            // Wait for DOM to be ready
            if (document.readyState === "complete") {
                init();
            } else {
                document.addEventListener("DOMContentLoaded", init);
            }
        });

        // Main initialization function
        function init() {
            // Create hacker background
            createHackerBackground();
            
            // Set up event listeners
            setupEventListeners();
            
            // Generate initial password
            generatePassword();
        }
    </script>
</body>
</html>
